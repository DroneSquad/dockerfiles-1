### gordonchan/nginx-ssl-ghost

[![](https://badge.imagelayers.io/gordonchan/nginx-ssl-ghost:latest.svg)](https://imagelayers.io/?images=gordonchan/nginx-ssl-ghost:latest 'Get your own badge on imagelayers.io')

The official [nginx:latest](https://hub.docker.com/_/nginx/) with a customised [default.conf](https://github.com/gchan/dockerfiles/blob/master/nginx-ssl-ghost/default.conf) designed for reverse proxying (with SSL support) to a container running [ghost](https://ghost.org/).

Use [nginx-ghost](https://github.com/gchan/dockerfiles/blob/master/nginx-ghost) for the non-SSL version.

### Example Usage

```
$ docker run -d --link my_ghost_container:ghost gordonchan/nginx-ssl-ghost
```

#### Assumptions

This image assumes the hostname `ghost` will connect to the container running the ghost application. If this is not the correct name, you will need to create an alias as described in the example above. Please note this form of linking is expected to be deprecated and removed in favour of Docker networks.

We also assume the default ghost port is exposed (2368).

##### SSL certificate and key file

As per the [default.conf](https://github.com/gchan/dockerfiles/blob/master/nginx-ssl-ghost/default.conf), this image assumes the certificate and key files are located at `/etc/nginx/certs/fullchain.pem` and `/etc/nginx/certs/privkey.pem` on the container respectively. The name of the files match the ones generated by [Let's Encrypt](https://letsencrypt.org/).

How do you get the files on the container?
* You could copy files to the container using `docker cp`.
* You could mount a host directory as a data volume `docker run -d -v /path/to/certs:etc/nginx/certs gordonchan/nginx-ssl-ghost`.
* You could create and copy the files to a data volume. Then mount the data volume to the container. `docker run -d --volumes-from nginx-data gordonchan/nginx-ssl-ghost`.

Creating a data volume gives the most flexibility as it is independent of a container's life cycle. Managing the set up with Docker Compose is ideal. See this [docker-compose.yml](https://github.com/gchan/docker-compose-files/blob/master/ghost-ssl/docker-compose.yml) for an example.

#### Nginx Configuration and SSL Cipher Suite

As per the [default.conf](https://github.com/gchan/dockerfiles/blob/master/nginx-ssl-ghost/default.conf), all HTTP requests are redirected (301 Permanent Redirect) to the HTTPS equivalent.

We are using the 'moderate' profile cipher suite recommended by [Mozilla](https://mozilla.github.io/server-side-tls/ssl-config-generator/?server=nginx-1.9.5&openssl=1.0.1e&hsts=yes&profile=intermediate).

#### License

Copyright (c) 2015 Gordon Chan. Released under the MIT License. It is free software, and may be redistributed under the terms specified in the [LICENSE](https://github.com/gchan/dockerfiles/blob/master/LICENSE.txt) file.

[![Analytics](https://ga-beacon.appspot.com/UA-70790190-2/dockerfiles/nginx-ssl-ghost/README.md?flat)](https://github.com/igrigorik/ga-beacon)
